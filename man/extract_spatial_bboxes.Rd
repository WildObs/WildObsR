% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{extract_spatial_bboxes}
\alias{extract_spatial_bboxes}
\title{Extract bounding boxes from spatial metadata}
\usage{
extract_spatial_bboxes(metadata)
}
\arguments{
\item{metadata}{A list-like dataframe returned by MongoDB when reading the
metadata collection into R
Must include a \code{spatial} element with either:
\itemize{
\item \code{spatial$bbox} — a data frame of bounding boxes in legacy format.
\item \code{spatial$features} — a list of GeoJSON-style features with
\code{geometry$coordinates} entries.
}}
}
\value{
A tibble (data frame) with columns:
\describe{
\item{locationName}{Character string indicating the name of the location.}
\item{xmin, ymin, xmax, ymax}{Numeric bounding box coordinates.}
\item{id}{Character string identifying the data package ID associated with each row.}
}
}
\description{
This internal helper function extracts and normalizes bounding boxes
from the \code{spatial} slot of the metadata collection returned by MongoDB
This function supports both the flat spatial bounding boxes (\code{spatial$bbox})
and the nested geoJSON-style (\code{spatial$features}) formats.
}
\details{
The output is a standardized data frame containing one row per
locationName with the corresponding bounding box coordinates and project ID.

The function automatically detects whether the metadata object uses
the flat bbox or nested geoJSON spatial format.
If both are present, results are merged and duplicates removed.

Invalid, empty, or malformed bounding boxes are skipped with NA values returned.
}
\keyword{internal}
