% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/check_schema.R
\name{check_schema}
\alias{check_schema}
\title{Validate Data Against CamTrap DP Schemas}
\usage{
check_schema(chosen_schema, data)
}
\arguments{
\item{chosen_schema}{A list object representing the schema to check against (e.g., `obs_schema`, `deps_schema`, `media_schema`).}

\item{data}{A data frame containing the dataset to be validated.}
}
\value{
The modified tabular data resource with updated fields and any necessary corrections applied.
}
\description{
This function checks that each camtrapDP resource (i.e. `observations`, `deployments`, and `media`)
conforms to the camtrapDP specified schema by validating field names, data types, and constraints (e.g., required fields, numeric ranges).
It creates missing fields if necessary, ensures data types are aligned with the schema, and reports any discrepancies. The modified dataset is returned with updates applied.
}
\details{
The function follows these steps:
\enumerate{
  \item Loops through each field in the provided schema.
  \item If a field does not exist in the dataset, it is created and filled with `NA` values of the appropriate type.
  \item Checks whether the data type of each field matches the expected type from the schema (e.g., character, numeric, datetime).
  \item If the field is numeric, it checks whether values fall within specified constraints (e.g., minimum, maximum).
  \item Checks that required fields are present and non-missing.
}
}
\examples{
# Example usage:
deps_schema <- list(
  fields = list(
    list(name = "locationID", type = "string", constraints = list(required = TRUE)),
    list(name = "longitude", type = "number", constraints = list(minimum = -180, maximum = 180)),
    list(name = "latitude", type = "number", constraints = list(minimum = -90, maximum = 90)),
    list(name = "timestamp", type = "datetime", constraints = list(required = TRUE))
  )
)

deps <- data.frame(
  locationID = c("loc1", "loc2"),
  longitude = c(151.2093, 153.0251),
  latitude = c(-33.8688, NA),
  timestamp = as.POSIXct(c("2023-01-01 12:00", NA))
)

# Check the data against the schema
validated_data <- check_schema(deps_schema, deps)
print(validated_data)

}
\author{
Tom Bruce
}
