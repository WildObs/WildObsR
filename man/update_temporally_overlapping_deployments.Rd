% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/update_temporally_overlapping_deployments.R
\name{update_temporally_overlapping_deployments}
\alias{update_temporally_overlapping_deployments}
\title{Group Temporally Overlapping Deployment IDs}
\usage{
update_temporally_overlapping_deployments(deps, obs, media)
}
\arguments{
\item{deps}{A data frame of camera deployments, containing columns \code{deploymentID}, \code{locationID},
\code{deploymentStart}, \code{deploymentEnd}, and \code{deploymentGroups}. The \code{deploymentStart} and \code{deploymentEnd}
columns should contain date-time information.}

\item{obs}{A data frame of observations with \code{deploymentID} and \code{locationID} columns that match with
the \code{deps} data frame.}

\item{media}{A data frame of media records with \code{deploymentID} column matching the \code{deps} data frame.}
}
\value{
A list with three updated data frames:
\describe{
\item{deployments}{The updated \code{deps} data frame with consolidated deploymentIDs for temporally
overlapping records.}
\item{observations}{The updated \code{obs} data frame with deploymentID changes to match those in \code{deps}.}
\item{media}{The updated \code{media} data frame with deploymentID changes to match those in \code{deps}.}
}
}
\description{
This function checks for and consolidates temporally overlapping deployment IDs within the same location.
It is designed to group deployments that are active at overlapping or nearly adjacent times, ensuring that
each deploymentID represents a distinct time period. This function is recommended for use in step 1 to validate
deploymentID assignments and in step 3 to verify temporal and spatial distinctions between deploymentIDs.
}
\details{
This function assumes that the provided \code{locationID} values are already spatially distinct. Deployments at the
same location with overlapping or closely spaced start and end times are grouped together under a new
deploymentID, ensuring temporal and spatial distinctness. After updating deploymentIDs in \code{deps},
the function also updates related deploymentIDs in \code{obs} and \code{media} to maintain consistency across data files.
The function includes checks to ensure matching deploymentIDs across the provided data frames before and after
processing, with detailed warnings if mismatches occur.
}
\examples{
# Minimal toy example to demonstrate how overlapping deployments are merged

# Create a deployments data frame with overlapping start and end dates
deps <- data.frame(
  deploymentID = c("Cam01_A", "Cam01_B"),
  locationID = c("Loc1", "Loc1"),
  deploymentStart = as.POSIXct(c("2020-01-01", "2020-01-05")),
  deploymentEnd   = as.POSIXct(c("2020-01-10", "2020-01-15")),
  deploymentGroups = NA_character_
)

# Observations linked to those deployments
obs <- data.frame(
  observationID = 1:4,
  deploymentID = rep(c("Cam01_A", "Cam01_B"), each = 2),
  locationID = "Loc1"
)

# Media linked to the same deployments
media <- data.frame(
  mediaID = paste0("m", 1:4),
  deploymentID = rep(c("Cam01_A", "Cam01_B"), each = 2)
)

# Run the function â€” overlapping deployments will be consolidated
results <- update_temporally_overlapping_deployments(
  deps = deps,
  obs = obs,
  media = media
)

# View updated deployments
results$deployments

# Check updated observation and media deployment IDs
results$observations
results$media

}
\author{
Zachary Amir
}
